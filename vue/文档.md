## vue 基础用法

### 理论

#### 面试题 1： 简单聊聊对于 MVVM 的了解

- 发展史以及旁支
  - a. 语义化模板
  - b.MVC - model view controller - M:数据 V：视图 C：数据处理
  - c. MVVM - Model-View-ViewModel - 是个很宽泛的概念，vue 运用到了这个概念。MVVM 相对于 MVC 是进步的，例如 MVC 思想的 JQuery，要操作页面上的多数据，会很麻烦。
    i. 数据会绑定在 viewModel 层并自动将数据渲染到页面中
    ii. 视图变化时，会通知 viewModel 层更新数据

### 写法

#### vue 是如何利用 mvvm 思想进行项目开发

数据双向绑定

- a. 利用花括号，构筑了数据与视图的双向绑定 —— 若干正则

  - 利用花括号{{语句}}，构建了数据和视图的`双向绑定关系`。花括号里的并非变量本身，而是关系。所以 花括号 内只要是一个合法的语句就是 OK 的。

- b. 通过视图绑定事件，来处理数据

  - 通过视图绑定事件，来处理数据。(通过给标签添加事件 v-on:/@)

- 想象一个场景 页面多个地方运用到了{{num}} 通过某一个标签上的 @click 事件，给 num+=1，会发生什么样的效果？页面上所有的{{num}}都会加一。这就是 MVVM 思想的一种体现：触发视图的变化，通过事件改变数据，给 num 加一。又因为数据被绑定在若干个视图上，所以若干个视图又因为数据的变化而发生改动。这就是 MVVM。每一个{{}}都是数据和视图的桥梁。

小点：
main.js 是 vue 实例化的入口

#### 生命周期

##### 面试题 2：vue 生命周期

```
beforeCreate => created=>
beforeMount => mounted =>
beforeUpdate => updated=>
beforeDestroy => destroyed

// 关键字：创建 - vue的实例被创建。
bC: new Vue() - 只有一个空实例，实例挂载功能；
c: data、props、method、computed 被创建 - 故可以进行数据操作 但 不涉及到 vdom 和 dom。

// 关键词：挂载 - Dom节点挂载 - 把vDom往Dom上挂载.
bM: vDom - 数据操作，但是不可涉及 dom
m: Dom - 理论上可以进行任何操作

// 关键词：更新 - 视图的更新。
bU: vDom 更新了的，dom 未更新是旧的 - 可以更新数据。
u: dom 已经更新了 — 谨慎操作数据，尽量只去做读取的操作。

// 关键词：销毁 - 实例被销毁。
bD: 实例 vm 尚未被销毁 — 清空 eventBus、reset store、clear 计时器
d: 实例已经被销毁 - 收尾
```

#### 定向监听

##### 面试点 3：computed 和 watch

相同点：

1. 基于 vue 的依赖收集机制
2. 都是被依赖的变化触发，进行改变进而进行处理计算

不同点：

1. 入和出
   computed: 多入单出 —— 多个值变化，组成一个值的变化
   watch: 单入多出 —— 单个值的变化，进而影响一系列的状态变更

2. 性能
   computed: 会自动 diff 依赖，若依赖没有变化，会改从缓存中读取当前计算值
   watch: 无论监听值变化与否，都会执行回调

3. 写法上
   computed: 必须有 return 返回值
   watch: 不一定

4. 时机上
   computed: 从首次生成赋值，就开始计算运行了
   watch: 首次不会运行，除非——immediate：true

#### 条件

##### v-if & v-show & v-else & v-else-if

v-if 无 dom，不会渲染实际节点及其子节点
v-show 存在实际节点及其子节点，单不展示，不占据位置

#### 循环

##### 面试题： v-for 和 v-if 循优先级

v-for > v-if 先循环 再判断

##### 面试题：key 的作用

1. 模板编译原理 —— template => dom
   template => 正则匹配语法 —— 生成 AST：静态 + 动态 => 转换 AST 为可执行方法 => render() => dom

2. dom diff
   1 2 3 4 5 6

6 5 7 3 2 1

层级：只考虑单层复用，多层级遍历实现
顺序：双向指针，首尾向中间移动
替换：移动、新增、删除；优先复用 —— key => 快速识别顺序

3. key 作用 —— 尽可能复用节点
   常见问题：index 做 key、随机数做 key

#### 指令

##### 默认指令

v-once - 只渲染依次
v-text - 渲染字符串
v-html - 渲染 html
v-bind - : 绑定赋值
v-on - @ 监听
v-model - 双向绑定 —— 语法糖
:value + @input

- 重配置

```js
  model: {
    prop: 'selected',
    event: 'change'
  }
```

##### 自定义指令

```js
  directives: {
    zhaowa: {
      update: function() {
        // ……
      }
    }
  }
  <div v-zhaowa></div>
```

#### 事件

##### v-on

##### 修饰符

.stop .prevent .capture .self .once .passive

##### 按钮修饰符

enter delete

##### 事件设计 - 为何 vue 把事件写在模板上，而不是 js 中

模板定位事件触发源 + 触发源寻找触发事件逻辑 —— 更方便定位问题
js 与事件本身解耦 —— 更便于测试隔离
viewModel 销毁，自动解绑事件 —— 更便于回收

### 组件化

#### 一般组件 + 动态组件
